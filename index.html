<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Refugee Dashboard</title>

    <!-- Import Vega, Vega-Lite, and Vega-Embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS Styling -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: white;
            color: black;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 40px;
        }

        /* Title Section */
        .title-section {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 20px;
            background-color: #f0f0f0; 
        }

        .title-section h1 {
            font-size: 2.5em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .title-section p {
            font-size: 1.2em;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
        }

        h2 {
            font-weight: 600;
            margin-bottom: 15px;
        }

        .chart-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 60px;
        }

        .chart-container {
            flex: 1;
            min-width: 450px;
            height: 400px;
            margin: 20px;
        }

        .chart-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 20px;
            font-size: 1.2em;
        }

        .centered-chart {
            display: flex;
            justify-content: center;
            margin: 40px 0;
            background-color: white; 
        }

        .vis-container {
            width: 100%;
            height: 100%;
            background-color: white;  
            border-radius: 10px;
            border: none;
        }

        /* Word Cloud Section */
        .word-cloud-section {
            background-color: #f0f0f0; 
            padding: 20px 0;
        }
        /* Timeline container */
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 50px auto;
            background-color: white; /* White background for timeline */
            padding: 20px 0;
        }

        /* The timeline line */
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #ddd;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }

        /* Container around content */
        .timeline-container {
            padding: 10px 40px;
            position: relative;
            width: 50%;
        }

        .timeline-title {
            text-align: center;
            margin-bottom: 40px;
        }

        /* Left-side timeline items */
        .timeline-container.left {
            left: 0;
        }

        /* Right-side timeline items */
        .timeline-container.right {
            left: 50%;
        }

        /* Content styling */
        .timeline-content {
            padding: 20px;
            background-color: white;
            position: relative;
            border-radius: 6px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Timeline arrows */
        .timeline-container.left::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -15px;
            border-width: 15px;
            border-style: solid;
            border-color: transparent white transparent transparent;
        }

        .timeline-container.right::after {
            content: '';
            position: absolute;
            top: 15px;
            left: -15px;
            border-width: 15px;
            border-style: solid;
            border-color: transparent transparent transparent white;
        }

        .timeline-content h2 {
            margin-top: 0;
            color: #f45c42;
        }

        .timeline-content p {
            margin: 0;
        }

        .bar-chart-section{
            background-color: #f0f0f0; 
            padding: 20px 0;
        }

        /* Footer styling */
        .infographic-footer {
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            background-color:white;
            font-size: 14px;
        }

        .infographic-footer a {
            color: #1a73e8;
            text-decoration: none;
        }

        .infographic-footer ul {
            list-style-type: none;
            padding: 0;
            margin-top: 10px;
        }

        .infographic-footer li {
            margin-bottom: 5px;
        }

        .infographic-footer p {
            margin: 5px 0;
        }
    </style>
</head>

<body>

    <!-- Title Section -->
    <div class="title-section">
        <h1>WHERE REFUGEES IN MALAYSIA CAME FROM?</h1>
        <p>Malaysia provides a temporary safe haven for refugees and asylum-seekers, offering a delicate balance of humanitarian assistance while navigating complex immigration policies. As of the end of August 2024, approximately 191,470 refugees and asylum-seekers are registered with UNHCR in Malaysia.</p>
    </div>

    <div class="container">
        <!-- First Chart (Map) - Centered -->
        <div class="chart-section">
            <div class="chart-text">
                <h2>Countries of Origin for Refugees in Malaysia</h2>
                <p>About 169,000 refugees originate from Myanmar, including 110,610 Rohingyas, 27,250 Chins, and 31,140 from other ethnic groups affected by conflict or persecution in Myanmar. An additional 22,470 refugees and asylum-seekers come from 50 other countries.</p>
            </div>
            <div class="centered-chart">
                <div id="map" class="chart-container vis-container"></div>
            </div>
        </div>
    </div>


    <!-- Word Cloud Section -->
    <div class="word-cloud-section">
        <div class="container">
            <div class="chart-section">
                <div class="chart-text">
                    <h2>THE TOP ORIGIN COUNTRIES OF REFUGEES IN MALAYSIA</h2>
                    <p>Malaysia has shown consistent sympathy towards the Rohingya population, a large portion of the refugee community, as part of its broader stance against the persecution of Muslims globally. The Malaysian government has raised awareness of the plight of the Rohingyas at the international level and has expressed concerns over Myanmarâ€™s treatment of this group.</p>
                </div>
                <div id="word_cloud" class="chart-container vis-container"></div>
            </div>
        </div>
    </div>

    <!-- Timeline Section -->
    <div class="timeline">
        <h2 class="timeline-title">Global Refugee Crisis Timeline (2000 - 2023)</h2>
        <div class="timeline-container left">
            <div class="timeline-content">
                <h2>2003</h2>
                <p>Iraq War: This conflict triggered a significant displacement of people from Iraq.</p>
            </div>
        </div>
        <div class="timeline-container right">
            <div class="timeline-content">
                <h2>2014</h2>
                <p>Syrian Civil War escalation: Led to one of the largest refugee crises in modern history.</p>
            </div>
        </div>
        <div class="timeline-container left">
            <div class="timeline-content">
                <h2>2015</h2>
                <p>Yemen Civil War: This conflict has created a major humanitarian crisis and displacement.</p>
            </div>
        </div>
        <div class="timeline-container right">
            <div class="timeline-content">
                <h2>2017</h2>
                <p>Myanmar Genocide:Over 700,000 Rohingya fled to neighboring Bangladesh due to violence, persecution, and destruction of villages.</p>
            </div>
        </div>
        <div class="timeline-container left">
            <div class="timeline-content">
                <h2>2021</h2>
                <p>Afghanistan Taliban Takeover: After the withdrawal of international forces, many Afghans fled the country.</p>
            </div>
        </div>
    </div>

    <!-- Bar Chart Section -->
    <div class="bar-chart-section">
        <div class="chart-section">
            <div id="bar_chart" class="chart-container vis-container"></div>
            <div class="chart-text">
                <h2>Total Refugees and Stateless Persons</h2>
                <p>In 2023, Malaysia's stateless population includes 9,392 non-displaced individuals eligible for Malaysian citizenship.</p>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="infographic-footer">
        <p>Created by Yeoh Sin Yee.</p>
        <p>Date: 15/10/2024</p>
        <p>Source:<a href="https://www.unhcr.org/refugee-statistics/download/?url=AJI2Ex" target="_blank"> UNHCR</a></p>
    <!-- Vega Embed Scripts with Error Handling -->
    <script type="text/javascript">
        vegaEmbed('#map', 'map_spec.json', { "actions": false }).then(function (result) {
            console.log("Map rendered");
        }).catch(function(error) {
            document.getElementById('map').innerHTML = '<p>Map data could not be loaded.</p>';
            console.error(error);
        });

        vegaEmbed('#word_cloud', 'word_cloud.json', { "actions": false }).then(function (result) {
            console.log("Word Cloud rendered");
        }).catch(function(error) {
            document.getElementById('word_cloud').innerHTML = '<p>Bubble chart data could not be loaded.</p>';
            console.error(error);
        });

        vegaEmbed('#bar_chart', 'bar_chart.json', { "actions": false }).then(function (result) {
            console.log("Bar Chart rendered");
        }).catch(function(error) {
            document.getElementById('bar_chart').innerHTML = '<p>Bar chart data could not be loaded.</p>';
            console.error(error);
        });
    </script>

</body>

</html>
